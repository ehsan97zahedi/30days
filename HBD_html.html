<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>30 Awesome Days for 30 Awesome Years</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    /* Layout: fully centered */
    :root{
      --bg1:#ffdbe9; /* blush */
      --bg2:#e9d7ff; /* lavender */
      --card-bg: rgba(255,255,255,0.72);
      --accent: #ff7fb6;
      --muted: #6b5a7a;
      --glass-blur: 10px;
      --radius: 18px;
      --shadow: 0 10px 30px rgba(120,60,120,0.12);
    }
    html,body{height:100%;}
    body{
      margin:0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(135deg,var(--bg1),var(--bg2));
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* floating shapes */
    .float {
      position:fixed;
      pointer-events:none;
      filter: blur(0.4px) saturate(110%);
      opacity:0.95;
      mix-blend-mode: screen;
    }
    .heart{
      width:120px; height:120px;
      transform-origin:center;
      animation: floaty 18s ease-in-out infinite;
    }
    .blob{
      width:260px; height:160px;
      border-radius:40% 60% 50% 50%;
      animation: floaty 24s ease-in-out infinite;
      opacity:0.55;
    }
    @keyframes floaty {
      0%{ transform: translateY(0) rotate(0deg) }
      50%{ transform: translateY(-18px) rotate(4deg) }
      100%{ transform: translateY(0) rotate(0deg) }
    }

    /* Card */
    .card {
      width: min(860px, 94vw);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,0.78), rgba(255,255,255,0.64));
      backdrop-filter: blur(var(--glass-blur));
      box-shadow: var(--shadow);
      padding: 28px;
      box-sizing:border-box;
      text-align:center;
    }

    h1{
      margin:6px 0 8px 0;
      font-family: "Playfair Display", Georgia, serif;
      font-size: clamp(22px, 3.6vw, 36px);
      color:#3b2342;
      letter-spacing: -0.02em;
    }
    p.lead{
      margin:0 0 18px 0;
      color:var(--muted);
      font-size: clamp(13px, 1.6vw, 16px);
    }

    .progress{
      font-size:13px;
      color:#7c5b7c;
      margin-bottom:16px;
    }

    .day-title{
      font-weight:600;
      color:#5b2b5b;
      margin:10px 0;
    }
    .desc{
      color:#6b5870;
      margin:6px 0 16px 0;
      white-space:pre-wrap;
      font-size:15px;
    }

    input[type="text"]{
      width: 68%;
      max-width:420px;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid rgba(120,90,120,0.12);
      outline:none;
      font-size:15px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
      text-align:center;
    }
    button{
      margin-left:12px;
      padding:10px 14px;
      border-radius:12px;
      border:none;
      font-weight:600;
      cursor:pointer;
      background: linear-gradient(90deg,var(--accent), #c66fb8);
      color:white;
      box-shadow: 0 6px 16px rgba(180,80,140,0.16);
      transition: transform 120ms ease, box-shadow 120ms ease;
    }
    button:active{ transform: translateY(1px); }
    .muted{ color:var(--muted); font-size:13px; margin-top:12px; }

    .frag-list{ margin:16px 0; display:flex; flex-wrap:wrap; justify-content:center; gap:8px; }
    .frag{ background: rgba(255,255,255,0.9); border-radius:10px; padding:6px 10px; font-weight:600; color:#77476f; box-shadow: 0 6px 14px rgba(120,60,120,0.06); }

    .controls{ margin-top:18px; display:flex; gap:10px; justify-content:center; }
    .ghost{
      background:transparent; color:#6b4a6b; border:1px solid rgba(120,80,120,0.12); box-shadow:none;
    }

    footer{ margin-top:14px; font-size:12px; color:#6b5870; }

    /* responsive */
    @media (max-width:520px){
      input[type="text"]{ width:100%; max-width:unset; margin-bottom:8px; }
      button{ margin-left:0; width:100%; }
      .controls{ flex-direction:column; align-items:center; gap:8px; }
    }
  </style>
</head>
<body>
  <!-- decorative floating shapes -->
  <svg class="float heart" style="left:6%; top:8%;" viewBox="0 0 24 24" fill="#ff9fc8" xmlns="http://www.w3.org/2000/svg">
    <path d="M12 21s-7.5-4.9-10-8.3C-0.3 8.6 4.9 3 8.7 5.2 10.6 6.4 12 8 12 8s1.4-1.6 3.3-2.8C19.1 3 24.3 8.6 22 12.7 19.5 16.1 12 21 12 21z"/>
  </svg>

  <div class="float blob" style="right:4%; bottom:4%; background: linear-gradient(120deg,#ffe0f1,#e6d8ff);"></div>
  <svg class="float heart" style="right:18%; top:18%; width:84px; height:84px; opacity:0.9;" viewBox="0 0 24 24" fill="#ffd0e8" xmlns="http://www.w3.org/2000/svg">
    <path d="M12 21s-7.5-4.9-10-8.3C-0.3 8.6 4.9 3 8.7 5.2 10.6 6.4 12 8 12 8s1.4-1.6 3.3-2.8C19.1 3 24.3 8.6 22 12.7 19.5 16.1 12 21 12 21z"/>
  </svg>

  <div class="card" role="main" aria-labelledby="title">
    <h1 id="title">30 Awesome Days for 30 Awesome Years</h1>
    <p class="lead">A little romantic-playful adventureâ€”one small surprise each day. Enter the day's secret code to unlock the next chapter.</p>

    <div id="app">
      <div class="progress" id="progress">Day 1 of 30</div>

      <div id="daybox">
        <div class="day-title" id="dayTitle">Day 1 â€” Welcome</div>
        <div class="desc" id="desc">Open the postcard in your hand. Tonight we'll begin the first tiny celebration.</div>

        <div style="margin-top:14px;">
          <input type="text" id="codeIn" placeholder="Enter today's code" autocomplete="off" />
          <button id="submitBtn">Unlock</button>
        </div>

        <div class="muted" id="msg" aria-live="polite"></div>

        <div class="frag-list" id="frags"></div>

        <div class="controls">
          <button id="resetBtn" class="ghost">Reset progress</button>
        </div>

        <footer id="note">Tip: give each code physically at the end of the day's surprise.</footer>
      </div>
    </div>
  </div>

<script>
/* ---------- CONFIG: Edit these for your custom days ---------- 
   Each object: { title, desc, dailyCode, fragment }
   Keep dailyCode short and memorable.
   'fragment' will be collected and used on Day 30 to form the final kalimba sequence.
*/
const days = [
  {title:"Day 1 â€” Plan Reveal ", desc:"Smile and enter the code (HBD) to see tomorrow's plan", dailyCode:"HBD", fragment:""},
  {title:"Day 2 â€” Botanic Garden", desc:"If the weather permits, let's go for a walk and a cup of tea in the Wellfield Botanic Garden. Alternatively, we can go to Rum Village Nature Center", dailyCode:"TEA", fragment:"3"},
  {title:"Day 3 â€” Present Day", desc:"A little present for you!", dailyCode:"POCKET", fragment:"6"},
  {title:"Day 4 â€” Quiet Walk", desc:"A short stroll to the bench where we talked for hours.", dailyCode:"WALK", fragment:"7"},
  {title:"Day 5 â€” Movie Night", desc:"Tonight your pick. Popcorn included.", dailyCode:"MOVIE", fragment:"8"},
  {title:"Day 6 â€” Recreate a Photo", desc:"Recreate one of our favorite photos together.", dailyCode:"PIC", fragment:"7"},
  {title:"Day 7 â€” Short Poem", desc:"I wrote something small for you.", dailyCode:"POEM", fragment:"6"},
  {title:"Day 8 â€” Watch Party", desc:"Watch a ND football game with other folks.", dailyCode:"IRISH", fragment:"4"},
  {title:"Day 9 â€” Sunday Brunch", desc:"Luxury brunch at Rohr's", dailyCode:"WAFFLE", fragment:"4"},
  {title:"Day10 â€” Bedroom", desc:"Expect something new in the bedroom", dailyCode:"ROSE", fragment:"6"},
  {title:"Day11 â€” Puzzle Night", desc:"Work a small puzzle together.", dailyCode:"PUZZLE", fragment:"7"},
  {title:"Day12 â€” Plant a Seed", desc:"Plant a little something to grow together.", dailyCode:"PLANT", fragment:"8"},
  {title:"Day13 â€” Playlist", desc:"I made a playlist just for you.", dailyCode:"PLAY", fragment:"7"},
  {title:"Day14 â€” Short Video Clip", desc:"Watch a short montaged video with me", dailyCode:"FAMILY", fragment:"6"},
  {title:"Day15 â€” Birthday Party", desc:"Let's throw a partyyyyyyy!", dailyCode:"WISH", fragment:"3"},
  {title:"Day16 â€” Breakfast Day", desc:"Enjoy!", dailyCode:"EGG", fragment:"3"},
  {title:"Day17 â€” Scavenger Clue", desc:"A clue leads to a small memento.", dailyCode:"CLUE", fragment:"6"},
  {title:"Day18 â€” Stargaze", desc:"Blanket, hot drink, stars.", dailyCode:"STARS", fragment:"7"},
  {title:"Day19 â€” Concert", desc:"Celebrate your birthday in the windy city", dailyCode:"STARBUCKS", fragment:"8"},
  {title:"Day20 â€” Happy Thanksgiving", desc:"Thanksgiving lunch at the dining hall", dailyCode:"TURKEY", fragment:"7"},
  {title:"Day21 â€” Read Aloud", desc:"I read a letter I wrote for you.", dailyCode:"READ", fragment:"6"},
  {title:"Day22 â€” Friendsgiving", desc:"Eat strange food and make conversation with fellow EE students (Present Day)", dailyCode:"GRADIEEE", fragment:"4"},
  {title:"Day23 â€” Personal Crossword", desc:"A custom crossword with clues only we know.", dailyCode:"CROSS", fragment:"2"},
  {title:"Day24 â€” Karaoke Night", desc:"Sing badly and laugh together.", dailyCode:"SING", fragment:"8"},
  {title:"Day25 â€” Night Out", desc:"Watch Zootopia 2 and do some ice-skating with me.", dailyCode:"SNOWBUNNY", fragment:"7"},
  {title:"Day26 â€” Pamper Kit", desc:"A day to relax and be spoiled.", dailyCode:"SPA", fragment:"8"},
  {title:"Day27 â€” Museum Moment", desc:"A short trip to a gallery or a virtual tour.", dailyCode:"ART", fragment:"7"},
  {title:"Day28 â€” Why I Love You Jar", desc:"She reads one note from the jar.", dailyCode:"JAR", fragment:"6"},
  {title:"Day29 â€” Petting Farm", desc:"A tiny trip to a farm", dailyCode:"ALPACA", fragment:"4"},
  {title:"Day30 â€” Grand Reveal", desc:"Assemble the collected numbers and play it with kalimba. Note: 8 is 1* .  There is still another little surprise for you!", dailyCode:"", fragment:""}
];

const STORAGE_KEY = "thirty_30_progress_v1";

/* ---------- App state ---------- */
let state = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
if(!state.currentDay){ state = { currentDay:1, collected: [] }; saveState(); }

function saveState(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); }

/* compute final secret as concatenation of day fragments 1..29 */
const finalFragments = days.slice(0,29).map(d=>d.fragment || "");
const finalSecret = finalFragments.join(' '); // separated by spaces to read as kalimba notes

/* ---------- UI hooks ---------- */
const progressEl = document.getElementById('progress');
const dayTitle = document.getElementById('dayTitle');
const desc = document.getElementById('desc');
const codeIn = document.getElementById('codeIn');
const submitBtn = document.getElementById('submitBtn');
const msg = document.getElementById('msg');
const frags = document.getElementById('frags');
const resetBtn = document.getElementById('resetBtn');
const showCodesBtn = document.getElementById('showCodesBtn');

/* render */
function render(){
  const i = state.currentDay - 1;
  progressEl.textContent = `Day ${state.currentDay} of ${days.length}`;
  if(state.currentDay <= days.length){
    const day = days[i];
    dayTitle.textContent = day.title;
    desc.textContent = day.desc;
    codeIn.value = "";
    if(state.currentDay === days.length){
      // final day: ask for final code (assembled notes)
      codeIn.placeholder = "Assemble the notes and enter final phrase";
      submitBtn.textContent = "Reveal";
    } else {
      codeIn.placeholder = "Enter today's code";
      submitBtn.textContent = "Unlock";
    }
  } else {
    dayTitle.textContent = "All done";
    desc.textContent = "You have completed the 30-day journey. Thank you for celebrating love.";
    codeIn.style.display = "none";
    submitBtn.style.display = "none";
  }
  // show collected fragments
  frags.innerHTML = "";
  state.collected.forEach((f, idx) => {
    const el = document.createElement('div');
    el.className = "frag";
    el.textContent = f || "â€”";
    frags.appendChild(el);
  });
}

/* handle submission */
submitBtn.addEventListener('click', handleSubmit);
codeIn.addEventListener('keydown', (e)=> { if(e.key === 'Enter') handleSubmit(); });

function handleSubmit(){
  msg.textContent = "";
  const input = (codeIn.value || "").trim();
  if(state.currentDay > days.length){ msg.textContent = "Journey complete."; return; }

  const idx = state.currentDay - 1;
  if(state.currentDay === days.length){
    // final day: check assembled final secret
    if(!input){ msg.textContent = "Please enter the final phrase assembled from the notes."; return; }
    if(input === finalSecret){
      // reveal kalimba sequence and play
      msg.textContent = "ðŸŽ‰ Grand reveal unlocked. Playing the kalimba sequence.";
      playKalimba(finalFragments);
      state.currentDay++;
      saveState();
      render();
    } else {
      msg.textContent = "Final phrase incorrect. Double check the collected notes and their order.";
    }
    return;
  }

  const expected = (days[idx].dailyCode || "").trim();
  if(!input){ msg.textContent = "Enter today's code to unlock the fragment."; return; }
  if(input === expected){
    // accept, reveal fragment and advance
    const frag = days[idx].fragment || "";
    state.collected.push(frag);
    state.currentDay++;
    saveState();
    render();
    alert("Code accepted. Fragment collected: " + (frag || "â€”"));
  } else {
    msg.textContent = "Code incorrect. Try again.";
  }
}

/* reset */
resetBtn.addEventListener('click', ()=>{
  if(confirm("Reset progress? This will erase collected fragments.")){
    state = { currentDay:1, collected: [] };
    saveState();
    render();
    codeIn.style.display = "";
    submitBtn.style.display = "";
    msg.textContent = "";
  }
});

/* show codes for you (not visible to recipient) */
showCodesBtn.addEventListener('click', ()=>{
  let list = "Day codes (for you):\n\n";
  days.forEach((d,i)=> list += `Day ${i+1}: ${d.dailyCode || "(final)"}\n`);
  alert(list);
});

/* ---------- simple kalimba player (synth) ---------- */
/* map note names to frequencies (approx for kalimba range) */
const noteFreq = {
  "C4":261.63,"D4":293.66,"E4":329.63,"F4":349.23,"G4":392.00,"A4":440.00,"B4":493.88,
  "C5":523.25,"D5":587.33,"E5":659.25,"F5":698.46,"G5":783.99,"A5":880.00,"B5":987.77,
  "C6":1046.5,"D6":1174.7,"E6":1318.5,"G6":1567.9,"A6":1760
};

function playNote(freq, when=0, dur=0.55){
  try{
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const o = ctx.createOscillator();
    const g = ctx.createGain();
    o.type = "triangle";
    o.frequency.setValueAtTime(freq, ctx.currentTime + when);
    g.gain.setValueAtTime(0, ctx.currentTime + when);
    g.gain.linearRampToValueAtTime(0.14, ctx.currentTime + when + 0.02);
    g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + when + dur);
    o.connect(g); g.connect(ctx.destination);
    o.start(ctx.currentTime + when);
    o.stop(ctx.currentTime + when + dur + 0.02);
  }catch(e){
    console.warn("Audio failed:", e);
  }
}

function playKalimba(notes){
  // notes: array of note names
  const seq = notes.filter(Boolean);
  if(seq.length === 0) return;
  // try-resume AudioContext on first user gesture
  const startOffset = 0.02;
  seq.forEach((n,i)=>{
    const f = noteFreq[n] || 440;
    playNote(f, startOffset + i * 0.45, 0.45);
  });
}

/* ---------- init ---------- */
render();

/* show helpful usage note once */
if(!localStorage.getItem('thirty_30_seen_hint')){
  localStorage.setItem('thirty_30_seen_hint','1');
  console.info("Usage hint: Give the day's code physically after the day's event. Use 'Show day codes (for you)' to see all codes so you can prepare notes.");
}
</script>
</body>
</html>
